{
  "lexicon": 1,
  "id": "ar.cabildoabierto.embed.poll",
  "defs": {
    "main": {
      "type": "object",
      "required": ["id", "poll", "createdAt"],
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier of the poll. Should be a hash of the poll object."
        },
        "poll": {
          "type": "ref",
          "ref": "#poll"
        },
        "createdAt": {
          "type": "string",
          "format": "datetime",
          "description": "The declared time when this record was created."
        }
      }
    },
    "poll": {
      "type": "object",
      "required": [
        "choices",
        "createdAt",
        "containerRef"
      ],
      "properties": {
        "containerRef": {
          "type": "ref",
          "ref": "#pollContainerRef"
        },
        "description": {
          "type": "string"
        },
        "choices": {
          "type": "array",
          "items": {
            "type": "ref",
            "ref": "#pollChoice"
          }
        },
        "createdAt": {
          "type": "string",
          "format": "datetime",
          "description": "The declared time when this poll was created."
        }
      }
    },
    "pollContainerRef": {
      "type": "object",
      "required": [],
      "properties": {
        "uri": {
          "type": "string",
          "format": "uri"
        },
        "topicId": {
          "type": "string"
        }
      }
    },
    "pollChoice": {
      "type": "object",
      "required": [
        "label"
      ],
      "properties": {
        "label": {
          "type": "string"
        }
      }
    },
    "view": {
      "type": "object",
      "required": [
        "id",
        "poll",
        "votes",
        "createdAt"
      ],
      "properties": {
        "id": {
          "type": "string"
        },
        "poll": {
          "type": "ref",
          "ref": "#poll"
        },
        "createdAt": {
          "type": "string",
          "format": "datetime"
        },
        "viewer": {
          "type": "ref",
          "ref": "#pollViewer"
        },
        "votes": {
          "type": "array",
          "items": {
            "type": "integer"
          }
        }
      }
    },
    "pollViewer": {
      "type": "object",
      "required": [],
      "properties": {
        "choice": {
          "type": "string"
        },
        "voteUri": {
          "type": "string",
          "format": "uri"
        }
      }
    }
  }
}